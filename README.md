# Repair Tracker Web Application

## Project Overview

This is a simple, single-page web application designed to track repair and correction submissions. It allows a user to input general information, details of corrections needed, and an accompanying photo for each record. The application features a form for new entries and a dashboard to view, filter, and manage existing records.

The primary goal of this project is to create a user-friendly, mobile-first interface for a single user or a small team to manage a centralized database of records without requiring complex backend infrastructure or paid services.

## Core Features

- **Dynamic Form Entry:** Users can add multiple correction pairs (mistake and correction) dynamically for each record.
- **Photo Uploads:** Each record is associated with a photo, which is uploaded to a third-party image hosting service.
- **Dashboard View:** All records are displayed in a clean, card-based UI inspired by Notion.
- **Advanced Filtering:** Records on the dashboard can be filtered by their status ("စီစစ်ဆဲ", "အတည်ပြုပြီး", "ပယ်ဖျက်သည်") and by the month of submission.
- **Record Management:** Users can edit existing records, update their status, or delete them directly from the dashboard.
- **Overdue Calculation:** The application automatically calculates and displays how many days have passed since a record was submitted, highlighting those that are overdue.
- **Toast Notifications:** User actions are confirmed with modern, non-blocking toast notifications.

## Technology Stack (Architectural Overview)

This project uses a combination of free-tier services to create a full-stack application without a traditional server. It is crucial for any future AI or developer to understand how these components interact.

### 1. **Frontend (Client-Side)**
- **HTML (`index.html`):** Defines the structure of the application, including the entry form, dashboard, and edit modal.
- **CSS (`style.css`):** Provides all the styling to create the Notion-inspired user interface, ensuring it is responsive and mobile-friendly.
- **JavaScript (`script.js`):** The "brain" of the application. It handles all user interactions, view switching, form validation, dynamic field creation, and communication with the backend APIs.

### 2. **Database (Data Storage)**
- **Service:** **Google Sheets**
- **Role:** Acts as the primary database for all textual data. Each row in the `Sheet1` tab represents a single record.
- **Key Columns:**
    - `ID`: A unique timestamp-based ID generated by the Google Apps Script.
    - `NRC`, `Name`, `Phone`, `SubmissionDate`, `Status`: Standard text fields.
    - `ImageUrl`: Stores the public URL of the photo hosted on ImgBB.
    - `CorrectionsData`: **Crucially, this is a JSON string**. It stores an array of mistake/correction objects (e.g., `[{"mistake":"A","correction":"B"}, {"mistake":"C","correction":"D"}]`) in a single cell.

### 3. **API (Backend Logic)**
- **Service:** **Google Apps Script**
- **Role:** Acts as the serverless backend or "bridge" between the frontend JavaScript and the Google Sheet database. It is bound directly to the Google Sheet.
- **Functions:**
    - `doGet()`: Handles `GET` requests from the frontend to read and return all data from the spreadsheet as a JSON array.
    - `doPost()`: Handles `POST` requests and performs different actions based on an `action` parameter sent from the frontend:
        - `action=create` (default): Creates a new record.
        - `action=update`: Updates all fields of an existing record based on its `id`.
        - `action=updateStatus`: Updates only the `Status` column of a specific record.
        - `action=delete`: Deletes an entire row based on its `id`.

### 4. **Image Hosting**
- **Service:** **ImgBB** (api.imgbb.com)
- **Role:** A third-party service used exclusively for hosting the uploaded photos. It is used because Firebase Storage required a billing account, which was not available.
- **Workflow:** The frontend JavaScript first uploads the user's selected image to the ImgBB API and receives a public URL in return. This URL is then saved as text in the Google Sheet.

### 5. **Hosting**
- **Service:** **Vercel**
- **Role:** Hosts the static frontend files (`index.html`, `style.css`, `script.js`). It is linked to the GitHub repository and provides automatic continuous deployment (CI/CD) on every `git push`.

## Data Flow / Workflow

### Creating a New Record
1. User fills out the form in the browser.
2. User clicks "မှတ်တမ်းတင်မည်".
3. `script.js` captures the image file.
4. The image is sent to the **ImgBB API**.
5. ImgBB returns a public `imageUrl`.
6. `script.js` gathers all other form data (NRC, Name, Corrections JSON, etc.) and the `imageUrl`.
7. All this data is sent in a `POST` request to the **Google Apps Script URL**.
8. The Google Apps Script receives the data and writes a new row into the **Google Sheet**.

### Reading and Displaying Records
1. User switches to the "Dashboard" view.
2. `script.js` sends a `GET` request to the **Google Apps Script URL**.
3. Google Apps Script reads the entire **Google Sheet**.
4. It converts the rows into JSON format and sends the data back to the browser.
5. `script.js` receives the JSON data, filters/sorts it, and renders the record cards dynamically.

## Key Configuration Variables
To set up or debug this project, two critical variables are located at the top of `script.js`:

- `GOOGLE_SCRIPT_URL`: The deployment URL of the Google Apps Script. **This must be updated if the script is ever re-deployed as a new version.**
- `IMGBB_API_KEY`: The API key obtained from an ImgBB account.

## How to Make Future Changes

- **For Frontend Changes (UI, client-side logic):**
    1. Edit `index.html`, `style.css`, or `script.js` in the GitHub repository.
    2. Commit the changes.
    3. Vercel will automatically deploy the new version.

- **For Backend Changes (How data is saved/edited):**
    1. Open the Google Sheet and go to **Extensions > Apps Script**.
    2. Edit the `Code.gs` file.
    3. Save the changes.
    4. Click **Deploy > Manage deployments**.
    5. Select the existing deployment, click the edit (pencil) icon, and choose **"New version"**.
    6. Click **Deploy**.
    7. **Crucially, copy the new Web app URL** and update the `GOOGLE_SCRIPT_URL` variable in `script.js`.
